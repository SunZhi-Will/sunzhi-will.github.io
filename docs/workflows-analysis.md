# GitHub Actions å·¥ä½œæµç¨‹åˆ†æå ±å‘Š

## ğŸ“Š å·¥ä½œæµç¨‹ç¸½è¦½

ç›®å‰å°ˆæ¡ˆå…±æœ‰ **7 å€‹ GitHub Actions å·¥ä½œæµç¨‹**ï¼š

### 1. **auto-fix-security.yml** - è‡ªå‹•ä¿®å¾©å®‰å…¨æ¼æ´
- **è§¸ç™¼æ¢ä»¶**ï¼š
  - ç•¶ `Security Audit` å·¥ä½œæµç¨‹å®Œæˆä¸”å¤±æ•—æ™‚
  - æ‰‹å‹•è§¸ç™¼ï¼ˆworkflow_dispatchï¼‰
- **åŠŸèƒ½**ï¼šè‡ªå‹•åŸ·è¡Œ `npm audit fix` ä¸¦å‰µå»º PR
- **ä¾è³´**ï¼šä¾è³´æ–¼ `security-audit.yml`

### 2. **codeql.yml** - CodeQL ä»£ç¢¼åˆ†æ
- **è§¸ç™¼æ¢ä»¶**ï¼š
  - Push åˆ° main/master
  - Pull Request
  - æ¯é€±æ—¥ UTC 00:00ï¼ˆæ’ç¨‹ï¼‰
  - æ‰‹å‹•è§¸ç™¼
- **åŠŸèƒ½**ï¼šä½¿ç”¨ GitHub CodeQL é€²è¡Œéœæ…‹ä»£ç¢¼åˆ†æ
- **èªè¨€**ï¼šJavaScript

### 3. **daily-ai-report.yml** - æ¯æ—¥ AI å ±å‘Šç”Ÿæˆ
- **è§¸ç™¼æ¢ä»¶**ï¼š
  - æ¯æ—¥å››æ¬¡æ’ç¨‹ï¼ˆå°ç£æ™‚é–“ 08:00 / 12:00 / 15:00 / 18:00ï¼‰
  - æ‰‹å‹•è§¸ç™¼
- **åŠŸèƒ½**ï¼š
  - ç”Ÿæˆæ¯æ—¥ AI å ±å‘Š
  - è¤‡è£½ blog åœ–ç‰‡
  - ç™¼é€ newsletterï¼ˆé€é Gmailï¼‰
  - è‡ªå‹•æäº¤è®Šæ›´

### 4. **nextjs.yml** - Next.js éƒ¨ç½²
- **è§¸ç™¼æ¢ä»¶**ï¼š
  - Push åˆ° main/masterï¼ˆç‰¹å®šè·¯å¾‘ï¼‰
  - æ‰‹å‹•è§¸ç™¼
  - ç•¶ `daily-ai-report.yml` å®Œæˆæ™‚
- **åŠŸèƒ½**ï¼šæ§‹å»ºä¸¦éƒ¨ç½² Next.js ç¶²ç«™åˆ° GitHub Pages

### 5. **security-audit.yml** - å®‰å…¨å¯©è¨ˆï¼ˆå¤š Jobï¼‰
- **è§¸ç™¼æ¢ä»¶**ï¼š
  - æ¯é€±ä¸€ UTC 00:00ï¼ˆæ’ç¨‹ï¼‰
  - æ‰‹å‹•è§¸ç™¼
  - package.json è®Šæ›´æ™‚
- **åŠŸèƒ½**ï¼šåŒ…å« 4 å€‹ Jobs
  - `security-audit`ï¼šåŸ·è¡Œ npm audit
  - `dependency-review`ï¼šä¾è³´å¯©æŸ¥ï¼ˆåƒ… PRï¼‰
  - `code-scanning`ï¼šä»£ç¢¼å®‰å…¨æƒæï¼ˆESLint + TruffleHogï¼‰
  - `security-summary`ï¼šç”Ÿæˆå®‰å…¨æ‘˜è¦å ±å‘Š

### 6. **sync-profile.yml** - åŒæ­¥å€‹äººæª”æ¡ˆ
- **è§¸ç™¼æ¢ä»¶**ï¼š
  - Push åˆ° main/master
  - Pull Request
  - æ‰‹å‹•è§¸ç™¼
- **åŠŸèƒ½**ï¼šå°‡ README å’Œå°ˆæ¡ˆåœ–ç‰‡åŒæ­¥åˆ° `SunZhi-Will/SunZhi-Will` repository

### 7. **test-newsletter.yml** - æ¸¬è©¦ Newsletter
- **è§¸ç™¼æ¢ä»¶**ï¼šåƒ…æ‰‹å‹•è§¸ç™¼
- **åŠŸèƒ½**ï¼šæ¸¬è©¦ newsletter ç™¼é€åŠŸèƒ½ï¼ˆdry-run æˆ–å¯¦éš›ç™¼é€ï¼‰

---

## ğŸ” åˆ†æçµæœ

### âœ… å„ªé»

1. **è·è²¬åˆ†é›¢æ¸…æ™°**ï¼šæ¯å€‹å·¥ä½œæµç¨‹éƒ½æœ‰æ˜ç¢ºçš„ç”¨é€”
2. **è§¸ç™¼æ¢ä»¶åˆç†**ï¼šæ ¹æ“šä¸åŒå ´æ™¯è¨­å®šé©ç•¶çš„è§¸ç™¼æ¢ä»¶
3. **å®‰å…¨æª¢æŸ¥å®Œå–„**ï¼šå¤šå±¤æ¬¡çš„å®‰å…¨æª¢æŸ¥æ©Ÿåˆ¶

### âš ï¸ æ½›åœ¨å•é¡Œ

#### 1. **å®‰å…¨ç›¸é—œå·¥ä½œæµç¨‹åˆ†æ•£**
- `security-audit.yml` å·²ç¶“åŒ…å«å¤šå€‹å®‰å…¨æª¢æŸ¥
- `codeql.yml` æ˜¯ç¨ç«‹çš„å®‰å…¨åˆ†æ
- `auto-fix-security.yml` ä¾è³´æ–¼ `security-audit.yml`
- **å»ºè­°**ï¼šå¯ä»¥è€ƒæ…®å°‡ CodeQL æ•´åˆåˆ° `security-audit.yml` ä¸­ä½œç‚ºä¸€å€‹ Job

#### 2. **é‡è¤‡çš„ Node.js è¨­ç½®**
- å¤šå€‹å·¥ä½œæµç¨‹éƒ½é‡è¤‡è¨­ç½® Node.js ç’°å¢ƒ
- **å½±éŸ¿**ï¼šé›–ç„¶æœ‰å¿«å–æ©Ÿåˆ¶ï¼Œä½†å¯ä»¥è€ƒæ…®ä½¿ç”¨å¯é‡ç”¨çš„å·¥ä½œæµç¨‹ï¼ˆreusable workflowsï¼‰

#### 3. **sync-profile.yml è§¸ç™¼æ¢ä»¶éæ–¼é »ç¹**
- åœ¨æ¯å€‹ Push å’Œ PR æ™‚éƒ½æœƒè§¸ç™¼
- **å»ºè­°**ï¼šåªåœ¨ç‰¹å®šè·¯å¾‘è®Šæ›´æ™‚è§¸ç™¼ï¼ˆå¦‚ README.md æˆ– public/projects/ï¼‰

#### 4. **daily-ai-report.yml åŠŸèƒ½éå¤š**
- åŒæ™‚åŒ…å«å ±å‘Šç”Ÿæˆã€åœ–ç‰‡è¤‡è£½ã€newsletter ç™¼é€ã€Git æäº¤
- **å»ºè­°**ï¼šå¯ä»¥æ‹†åˆ†ç‚ºå¤šå€‹ Jobsï¼Œæé«˜å¯ç¶­è­·æ€§

---

## ğŸ’¡ å„ªåŒ–å»ºè­°

### å»ºè­° 1ï¼šæ•´åˆ CodeQL åˆ° Security Audit

å°‡ `codeql.yml` æ•´åˆåˆ° `security-audit.yml` ä¸­ä½œç‚ºä¸€å€‹ Jobï¼Œæ¸›å°‘å·¥ä½œæµç¨‹æ•¸é‡ï¼š

```yaml
# åœ¨ security-audit.yml ä¸­æ–°å¢
codeql-analysis:
  name: CodeQL Analysis
  runs-on: ubuntu-latest
  # ... CodeQL æ­¥é©Ÿ
```

**å„ªé»**ï¼š
- æ¸›å°‘å·¥ä½œæµç¨‹æ•¸é‡ï¼ˆ7 â†’ 6ï¼‰
- æ‰€æœ‰å®‰å…¨æª¢æŸ¥é›†ä¸­ç®¡ç†
- çµ±ä¸€çš„è§¸ç™¼æ¢ä»¶å’Œå ±å‘Š

### å»ºè­° 2ï¼šå„ªåŒ– sync-profile.yml è§¸ç™¼æ¢ä»¶

åªåœ¨ç›¸é—œæ–‡ä»¶è®Šæ›´æ™‚è§¸ç™¼ï¼š

```yaml
on:
  push:
    branches: [main, master]
    paths:
      - 'README.md'
      - 'README_zh.md'
      - 'public/projects/**'
```

**å„ªé»**ï¼š
- æ¸›å°‘ä¸å¿…è¦çš„åŸ·è¡Œ
- ç¯€çœ Actions åˆ†é˜æ•¸

### å»ºè­° 3ï¼šæ‹†åˆ† daily-ai-report.yml

å°‡åŠŸèƒ½æ‹†åˆ†ç‚ºå¤šå€‹ Jobsï¼š

```yaml
jobs:
  generate-report:
    # ç”Ÿæˆå ±å‘Š
  
  copy-images:
    needs: generate-report
    # è¤‡è£½åœ–ç‰‡
  
  send-newsletter:
    needs: generate-report
    # ç™¼é€ newsletter
  
  commit-changes:
    needs: [generate-report, copy-images]
    # æäº¤è®Šæ›´
```

**å„ªé»**ï¼š
- æ›´å¥½çš„éŒ¯èª¤è™•ç†
- å¯ä»¥ä¸¦è¡ŒåŸ·è¡Œéƒ¨åˆ† Jobs
- æ›´å®¹æ˜“ç¶­è­·å’Œèª¿è©¦

### å»ºè­° 4ï¼šå‰µå»ºå¯é‡ç”¨çš„å·¥ä½œæµç¨‹

å‰µå»º `.github/workflows/reusable-setup-node.yml`ï¼š

```yaml
name: Setup Node.js Environment

on:
  workflow_call:
    inputs:
      node-version:
        required: false
        default: '20'
        type: string

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: ${{ inputs.node-version }}
          cache: 'npm'
      - run: npm ci
```

**å„ªé»**ï¼š
- æ¸›å°‘é‡è¤‡ä»£ç¢¼
- çµ±ä¸€ç’°å¢ƒé…ç½®
- æ›´å®¹æ˜“ç¶­è­·

---

## ğŸ“ˆ å·¥ä½œæµç¨‹åŸ·è¡Œé »ç‡ä¼°ç®—

| å·¥ä½œæµç¨‹ | è§¸ç™¼é »ç‡ | é ä¼°æ¯æœˆåŸ·è¡Œæ¬¡æ•¸ |
|---------|---------|----------------|
| auto-fix-security.yml | å®‰å…¨å¯©è¨ˆå¤±æ•—æ™‚ | ~1-2 æ¬¡ |
| codeql.yml | Push/PR + æ¯é€±ä¸€æ¬¡ | ~30-50 æ¬¡ |
| daily-ai-report.yml | æ¯æ—¥ 4 æ¬¡ | ~120 æ¬¡ |
| nextjs.yml | Push/PR + daily-ai-report å®Œæˆ | ~30-50 æ¬¡ |
| security-audit.yml | æ¯é€±ä¸€æ¬¡ + package.json è®Šæ›´ | ~5-10 æ¬¡ |
| sync-profile.yml | æ¯æ¬¡ Push/PR | ~30-50 æ¬¡ |
| test-newsletter.yml | æ‰‹å‹•è§¸ç™¼ | ~1-5 æ¬¡ |

**ç¸½è¨ˆ**ï¼šç´„ **217-287 æ¬¡/æœˆ**

---

## ğŸ¯ å„ªå…ˆç´šå»ºè­°

### é«˜å„ªå…ˆç´šï¼ˆç«‹å³åŸ·è¡Œï¼‰
1. âœ… **å„ªåŒ– sync-profile.yml è§¸ç™¼æ¢ä»¶** - æ¸›å°‘ä¸å¿…è¦çš„åŸ·è¡Œ
2. âœ… **æ•´åˆ CodeQL åˆ° Security Audit** - çµ±ä¸€å®‰å…¨æª¢æŸ¥

### ä¸­å„ªå…ˆç´šï¼ˆè¿‘æœŸåŸ·è¡Œï¼‰
3. âš ï¸ **æ‹†åˆ† daily-ai-report.yml** - æé«˜å¯ç¶­è­·æ€§
4. âš ï¸ **å‰µå»ºå¯é‡ç”¨å·¥ä½œæµç¨‹** - æ¸›å°‘é‡è¤‡ä»£ç¢¼

### ä½å„ªå…ˆç´šï¼ˆé•·æœŸå„ªåŒ–ï¼‰
5. ğŸ“ **ç›£æ§å·¥ä½œæµç¨‹åŸ·è¡Œæ™‚é–“** - å„ªåŒ–æ•ˆèƒ½
6. ğŸ“ **æ·»åŠ å·¥ä½œæµç¨‹ç‹€æ…‹å¾½ç« ** - æå‡å¯è¦–æ€§

---

## ğŸ“ çµè«–

ç›®å‰æœ‰ **7 å€‹å·¥ä½œæµç¨‹**ï¼Œæ•¸é‡é©ä¸­ï¼Œä½†å¯ä»¥é€šéä»¥ä¸‹æ–¹å¼å„ªåŒ–ï¼š

1. **æ•´åˆç›¸é—œå·¥ä½œæµç¨‹**ï¼šå°‡ CodeQL æ•´åˆåˆ° Security Audit
2. **å„ªåŒ–è§¸ç™¼æ¢ä»¶**ï¼šæ¸›å°‘ä¸å¿…è¦çš„åŸ·è¡Œ
3. **æé«˜å¯ç¶­è­·æ€§**ï¼šæ‹†åˆ†è¤‡é›œå·¥ä½œæµç¨‹ï¼Œå‰µå»ºå¯é‡ç”¨çµ„ä»¶

**å»ºè­°è¡Œå‹•**ï¼š
- å…ˆåŸ·è¡Œé«˜å„ªå…ˆç´šå„ªåŒ–ï¼ˆsync-profile.yml å’Œ CodeQL æ•´åˆï¼‰
- ç›£æ§å„ªåŒ–å¾Œçš„æ•ˆæœ
- å†è€ƒæ…®ä¸­å„ªå…ˆç´šçš„æ”¹é€²

---

**æœ€å¾Œæ›´æ–°**ï¼š2025å¹´1æœˆ
**åˆ†æè€…**ï¼šAI Assistant
